<ion-view view-title="{{ 'mma.competency.userplans' | translate }}">
    <ion-nav-buttons side="secondary">
        <a ng-if="profileLink" mm-user-link userid="{{userId}}" aria-label="{{ 'mm.user.viewprofile' | translate }}">
            <img ng-if="profileLink && profileLink !== true" class="button mm-bar-button-image" ng-src="{{profileLink}}" mm-external-content>
            <span ng-if="profileLink === true" class="button button-icon icon ion-person"></span>
        </a>
    </ion-nav-buttons>
    <mm-split-view load-when="plansLoaded" component="mmaLearningPlansList">
        <ion-content mm-state-class>
            <ion-refresher pulling-text="{{ 'mm.core.pulltorefresh' | translate }}" ng-if="plansLoaded" on-refresh="refreshLearningPlans()">
            </ion-refresher>
            <mm-loading hide-until="plansLoaded">
                <ul class="list">
                    <li ng-if="plans.length == 0" class="item">{{ 'mma.competency.noplanswerecreated' | translate }}</li>
                    <li ng-repeat="plan in plans">
                        <a class="item item-text-wrap" mm-split-view-link="site.learningplan({id: plan.id})" title="{{plan.name}}">
                            <h2>{{plan.name}}</h2>
                            <p ng-if="plan.duedate">{{ 'mma.competency.duedate' | translate }}: {{ plan.duedate | mmToLocaleString }}</p>
                        </a>
                    </li>
                </ul>
            </mm-loading>
        </ion-content>
    </mm-split-view>
</ion-view>
<ion-view>
    <ion-nav-title>{{ title }}</ion-nav-title>
    <ion-nav-buttons side="secondary">
        <a ng-if="profileLink" mm-user-link userid="{{userId}}" aria-label="{{ 'mm.user.viewprofile' | translate }}">
            <img ng-if="profileLink && profileLink !== true" class="button mm-bar-button-image" ng-src="{{profileLink}}" mm-external-content>
            <span ng-if="profileLink === true" class="button button-icon icon ion-person"></span>
        </a>
    </ion-nav-buttons>
    <mm-split-view load-when="competenciesLoaded" load="{{competencyToLoad}}" component="mmaCompetenciesList">
        <ion-content mm-state-class>
            <ion-refresher pulling-text="{{ 'mm.core.pulltorefresh' | translate }}" ng-if="competenciesLoaded" on-refresh="refreshCompetencies()">
            </ion-refresher>
            <mm-loading hide-until="competenciesLoaded">
                <ul class="list">
                    <li ng-repeat="competency in competencies">
                        <a class="item item-text-wrap" mm-split-view-link="site.competency({ {{idname}}: id, competencyid: competency.competency.id})" title="{{competency.competency.shortname}}">
                            {{competency.competency.shortname}} <small>{{competency.competency.idnumber}}</small>
                            <span ng-if="competency.usercompetency" ng-class="{'badge-balanced': competency.usercompetency.proficiency, 'badge-assertive': !competency.usercompetency.proficiency}" class="badge">{{ competency.usercompetency.gradename }}</span>
                            <span ng-if="competency.usercompetencycourse" ng-class="{'badge-balanced': competency.usercompetencycourse.proficiency, 'badge-assertive': !competency.usercompetencycourse.proficiency}" class="badge">{{ competency.usercompetencycourse.gradename }}</span>
                        </a>
                    </li>
                </ul>
            </mm-loading>
        </ion-content>
    </mm-split-view>
</ion-view>